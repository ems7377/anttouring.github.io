webpackJsonp([44],{I8Oa:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=v(a("trpn")),n=v(a("IidI")),l=v(a("to+/")),o=v(a("0b0c")),p=v(a("G3dI")),r=v(a("rpsp")),s=v(a("vgHw")),c=v(a("1cZb")),d=v(a("PoSO")),u=v(a("NJOH")),f=v(a("uuhB")),m=v(a("37+n")),_=v(a("vaID")),h=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}();a("Op6J"),a("1uA9"),a("f5Xo"),a("kxBb"),a("/Hhv"),a("Nmhe"),a("ZJow"),a("YaoS"),a("BTAY"),a("mKHw"),a("TZP0"),a("8QNH"),a("nclB");var A=v(a("U7vG")),g=v(a("mtWM")),b=a("Pq8k"),y=a("iWlL"),E=v(a("SOi3"));function v(e){return e&&e.__esModule?e:{default:e}}var M=_.default.confirm,C=m.default.Item,T=f.default.TextArea,w=u.default.Option,O=d.default.Button,k=d.default.Group,N=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.onSubmitBeforeCheck=function(e){a.props.form.validateFields(function(t,i){t||(i.status=e,i.logo=a.props.logoImage[0].response,i.createUserId=a.props.createUserId,i.createUserName=a.props.createUserName,i.createCompanyId=a.props.createCompanyId,i.createCompanyName=a.props.createCompanyName,a.props.onSubmit(i))})},a.checkApplicationName=function(e,t,i){a.props.form;t?(0,g.default)({url:"/api-application/checkApplicationName/"+t,method:"GET"}).then(function(e){e.data?i(a.props.intl.formatMessage({id:"scenes_Application_ApplicationAdd_modal_sameName_content"})):i()}):i()},a.checkApplicationEnName=function(e,t,i){a.props.form;t?(0,g.default)({url:"/api-application/checkApplicationEnName/"+t,method:"GET"}).then(function(e){e.data?i(a.props.intl.formatMessage({id:"scenes_Application_ApplicationAdd_modal_sameEnName_content"})):i()}):i()},a.checkApplicationCode=function(e,t,i){a.props.form;t?(0,g.default)({url:"/api-application/checkApplicationCode/"+t,method:"GET"}).then(function(e){e.data?i(a.props.intl.formatMessage({id:"scenes_Application_ApplicationAdd_modal_sameCode_content"})):i()}):i()},a.handleCancelLogo=function(){a.props.update({name:"visibleLogo",value:!1})},a.handlePreviewLogo=function(e){a.props.update({name:"visibleLogo",value:!0})},a.handleRemoveLogo=function(){a.props.update({name:"logoImage",value:[]}),a.props.form.setFieldsValue({logo:""})},a.handleChangeLogo=function(e){var t=e.file,i=e.fileList;"error"===t.status?c.default.error(t.response.message,5):(a.props.update({name:"logoImage",value:i}),a.props.update({name:"previewLogo",value:t.url||t.thumbUrl}))},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,A.default.Component),h(t,[{key:"componentWillMount",value:function(){this.props.dispatch((0,y.initialApplicationData)())}},{key:"componentDidMount",value:function(){this.props.dispatch((0,y.getApplicationTerminals)()),this.props.dispatch((0,y.getApplicationModels)()),this.props.dispatch((0,y.getApplicationTypes)()),this.props.dispatch((0,y.getApplicationCategoryTree)())}}]),h(t,[{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator;return A.default.createElement(i.default,{spinning:this.props.loading,size:"large"},A.default.createElement(_.default,{visible:this.props.modalVisible,title:this.props.modalTitle&&this.props.intl.formatMessage({id:this.props.modalTitle}),okText:this.props.modalOk&&this.props.intl.formatMessage({id:this.props.modalOk}),cancelText:this.props.modalCancel&&this.props.intl.formatMessage({id:this.props.modalCancel}),onOk:this.props.onOk,onCancel:this.props.onCancel},A.default.createElement("p",null,this.props.modalContent&&this.props.intl.formatMessage({id:this.props.modalContent}))),A.default.createElement(o.default,{type:"flex",justify:"center"},A.default.createElement(p.default,{span:24},A.default.createElement(m.default,{layout:"horizontal"},A.default.createElement(o.default,null,A.default.createElement(p.default,{span:12},A.default.createElement(C,{label:A.default.createElement("span",null,this.props.intl.formatMessage({id:"scenes_Application_ApplicationAdd_applicationLogo_label"}),A.default.createElement(E.default,{title:this.props.intl.formatMessage({id:"scenes_Application_ApplicationAdd_applicationLogo_helpTip"})}))},t("logo",{rules:[{required:!0,message:this.props.intl.formatMessage({id:"scenes_Application_ApplicationAdd_uploadLogo_message"})}]})(A.default.createElement(r.default,{accept:"image/*",action:"/api-imagefiles/",listType:"picture-card",data:function(e){return{File:e}},fileList:this.props.logoImage,onRemove:this.handleRemoveLogo,onPreview:this.handlePreviewLogo,onChange:this.handleChangeLogo},this.props.logoImage.length<1&&A.default.createElement("div",null,A.default.createElement(s.default,{type:"plus"}),A.default.createElement("div",{className:"ant-upload-text"},this.props.intl.formatMessage({id:"scenes_Application_ApplicationAdd_uploadLogo_label"}))))),A.default.createElement(_.default,{visible:this.props.visibleLogo,footer:null,onCancel:this.handleCancelLogo},A.default.createElement("img",{alt:"logo",style:{width:"100%"},src:this.props.previewLogo})))),A.default.createElement(p.default,{span:12},A.default.createElement(C,{label:A.default.createElement("span",null,this.props.intl.formatMessage({id:"scenes_Application_ApplicationAdd_applicationTerminal_label"}),A.default.createElement(E.default,{title:this.props.intl.formatMessage({id:"scenes_Application_ApplicationAdd_applicationTerminal_helpTip"})}))},t("terminal",{rules:[{required:!0,message:this.props.intl.formatMessage({id:"scenes_Application_ApplicationAdd_promptTerminal_message"})}]})(A.default.createElement(k,{name:"terminal"},this.props.applicationTerminals.map(function(e){return A.default.createElement(O,{key:e.id,value:e.id},e.name)})))))),A.default.createElement(o.default,{gutter:16,type:"flex",justify:"space-between"},A.default.createElement(p.default,{span:12},A.default.createElement(C,{label:A.default.createElement("span",null,this.props.intl.formatMessage({id:"scenes_Application_ApplicationAdd_applicationName_label"}),A.default.createElement(E.default,{title:this.props.intl.formatMessage({id:"scenes_Application_ApplicationAdd_applicationName_helpTip"})}))},t("name",{rules:[{required:!0,message:this.props.intl.formatMessage({id:"scenes_Application_ApplicationAdd_promptName_message"})},{validator:this.checkApplicationName}]})(A.default.createElement(f.default,{name:"name",placeholder:this.props.intl.formatMessage({id:"scenes_Application_ApplicationAdd_applicationName_placeholder"})})))),A.default.createElement(p.default,{span:12},A.default.createElement(C,{label:A.default.createElement("span",null,this.props.intl.formatMessage({id:"scenes_Application_ApplicationAdd_applicationEnName_label"}),A.default.createElement(E.default,{title:this.props.intl.formatMessage({id:"scenes_Application_ApplicationAdd_applicationEnName_helpTip"})}))},t("enName",{rules:[{required:!0,message:this.props.intl.formatMessage({id:"scenes_Application_ApplicationAdd_promptEnName_message"})},{validator:this.checkApplicationEnName}]})(A.default.createElement(f.default,{name:"enName",placeholder:this.props.intl.formatMessage({id:"scenes_Application_ApplicationAdd_applicationEnName_placeholder"})}))))),A.default.createElement(o.default,{gutter:16,type:"flex",justify:"space-between"},A.default.createElement(p.default,{span:12},A.default.createElement(C,{label:A.default.createElement("span",null,this.props.intl.formatMessage({id:"scenes_Application_ApplicationAdd_applicationCode_label"}),A.default.createElement(E.default,{title:this.props.intl.formatMessage({id:"scenes_Application_ApplicationAdd_applicationCode_helpTip"})}))},t("code",{rules:[{required:!0,message:this.props.intl.formatMessage({id:"scenes_Application_ApplicationAdd_promptCode_message"})},{validator:this.checkApplicationCode}]})(A.default.createElement(f.default,{name:"code",placeholder:this.props.intl.formatMessage({id:"scenes_Application_ApplicationAdd_applicationCode_placeholder"})})))),A.default.createElement(p.default,{span:12},A.default.createElement(C,{label:A.default.createElement("span",null,this.props.intl.formatMessage({id:"scenes_Application_ApplicationAdd_applicationModel_label"}),A.default.createElement(E.default,{title:this.props.intl.formatMessage({id:"scenes_Application_ApplicationAdd_applicationModel_helpTip"})}))},t("model",{rules:[{required:!0,message:this.props.intl.formatMessage({id:"scenes_Application_ApplicationAdd_promptModel_message"})}]})(A.default.createElement(u.default,{name:"model",style:{width:"100%"},placeholder:this.props.intl.formatMessage({id:"scenes_Application_ApplicationAdd_applicationModel_placeholder"})},this.props.applicationModels.map(function(e){return A.default.createElement(w,{key:e.id,value:e.id},e.name)})))))),A.default.createElement(o.default,{gutter:16,type:"flex",justify:"space-between"},A.default.createElement(p.default,{span:12},A.default.createElement(C,{label:A.default.createElement("span",null,this.props.intl.formatMessage({id:"scenes_Application_ApplicationAdd_applicationType_label"}),A.default.createElement(E.default,{title:this.props.intl.formatMessage({id:"scenes_Application_ApplicationAdd_applicationType_helpTip"})}))},t("type",{rules:[{required:!0,message:this.props.intl.formatMessage({id:"scenes_Application_ApplicationAdd_promptType_message"})}]})(A.default.createElement(u.default,{name:"type",style:{width:"100%"},placeholder:this.props.intl.formatMessage({id:"scenes_Application_ApplicationAdd_applicationType_placeholder"})},this.props.applicationTypes.map(function(e){return A.default.createElement(w,{key:e.id,value:e.id},e.name)}))))),A.default.createElement(p.default,{span:12},A.default.createElement(C,{label:A.default.createElement("span",null,this.props.intl.formatMessage({id:"scenes_Application_ApplicationAdd_applicationCategory_label"}),A.default.createElement(E.default,{title:this.props.intl.formatMessage({id:"scenes_Application_ApplicationAdd_applicationCategory_helpTip"})}))},t("category",{rules:[{required:!0,message:this.props.intl.formatMessage({id:"scenes_Application_ApplicationAdd_promptCategory_message"})}]})(A.default.createElement(l.default,{name:"category",placeholder:this.props.intl.formatMessage({id:"scenes_Application_ApplicationAdd_applicationCategory_placeholder"}),style:{width:"100%"},expandTrigger:"hover",options:this.props.applicationCategoryTree}))))),A.default.createElement(o.default,null,A.default.createElement(p.default,{span:24},A.default.createElement(C,{label:A.default.createElement("span",null,this.props.intl.formatMessage({id:"scenes_Application_ApplicationAdd_description_label"}),A.default.createElement(E.default,{title:this.props.intl.formatMessage({id:"scenes_Application_ApplicationAdd_description_helpTip"})}))},t("description",{rules:[{required:!0,message:this.props.intl.formatMessage({id:"scenes_Application_ApplicationAdd_promptDescription_message"})}]})(A.default.createElement(T,{name:"description",placeholder:this.props.intl.formatMessage({id:"scenes_Application_ApplicationAdd_description_placeholder"}),autosize:{minRows:4,maxRows:8}}))))),A.default.createElement(o.default,{style:{paddingTop:16}},A.default.createElement(n.default,{onClick:function(){return e.props.onReturn()}},this.props.intl.formatMessage({id:"scenes_Application_ApplicationAdd_return_label"})),A.default.createElement(n.default,{type:"primary",onClick:function(){M({title:e.props.intl.formatMessage({id:"scenes_Application_ApplicationAdd_modal_submit_content"}),okText:e.props.intl.formatMessage({id:"scenes_Application_ApplicationAdd_modal_submit_label"}),cancelText:e.props.intl.formatMessage({id:"scenes_Application_ApplicationAdd_modal_save_label"}),onOk:function(){e.onSubmitBeforeCheck("1")},onCancel:function(){e.onSubmitBeforeCheck("0")}})}},this.props.intl.formatMessage({id:"scenes_Application_ApplicationAdd_submit_label"})))))))}}]),t}();N=m.default.create()(N),t.default=(0,b.injectIntl)(N)},SOi3:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=p(a("ExGt")),n=p(a("vgHw")),l=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}();a("2r77"),a("ZJow");var o=p(a("U7vG"));function p(e){return e&&e.__esModule?e:{default:e}}a("uRMb");var r=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Component),l(t,[{key:"render",value:function(){return o.default.createElement(i.default,this.props," ",o.default.createElement(n.default,{type:"question-circle-o",style:{fontSize:16,color:"#0088cc"}})," ")}}]),t}();t.default=r},fevo:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}(),n=r(a("U7vG")),l=a("4n+p"),o=r(a("I8Oa")),p=a("iWlL");function r(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,n.default.Component),i(t,[{key:"render",value:function(){return n.default.createElement(o.default,this.props)}}]),t}();t.default=(0,l.connect)(function(e){return{loading:e.applicationAdd.loading,isAuthenticated:e.authentication.isAuthenticated,createUserId:e.authentication.isAuthenticated?e.authentication.userId:"",createUserName:e.authentication.isAuthenticated?e.authentication.username:"",createCompanyId:e.userData.enterprises.length>0?e.userData.enterprises[e.userData.currentEnterprise].id:"",createCompanyName:e.userData.enterprises.length>0?e.userData.enterprises[e.userData.currentEnterprise].name:"",modalVisible:e.applicationAdd.modalVisible,modalTitle:e.applicationAdd.modalTitle,modalContent:e.applicationAdd.modalContent,modalOk:e.applicationAdd.modalOk,modalCancel:e.applicationAdd.modalCancel,onOk:e.applicationAdd.onOk,onCancel:e.applicationAdd.onCancel,visibleLogo:e.applicationAdd.visibleLogo,previewLogo:e.applicationAdd.previewLogo,logoImage:e.applicationAdd.logoImage,logo:e.applicationAdd.logo,applicationTerminals:e.applicationAdd.applicationTerminals,applicationModels:e.applicationAdd.applicationModels,applicationTypes:e.applicationAdd.applicationTypes,applicationCategoryTree:e.applicationAdd.applicationCategoryTree}},function(e,t){return{dispatch:e,update:function(t){e((0,p.updateApplicationData)(t))},onSubmit:function(t){e((0,p.submitApplication)(t))},onReturn:function(){t.history.goBack()}}})(s)}});