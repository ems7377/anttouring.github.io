webpackJsonp([45],{bStE:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),n=s(a("U7vG")),p=a("4n+p"),o=s(a("s9FF")),l=a("cf/U"),i=a("sQS6");function s(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,n.default.Component),r(t,[{key:"render",value:function(){return n.default.createElement(o.default,this.props)}}]),t}();t.default=(0,p.connect)(function(e){return{loading:e.deployMarketApp.loading,updating:e.deployMarketApp.updating,isAuthenticated:e.authentication.isAuthenticated,userId:e.authentication.isAuthenticated?e.authentication.userId:"",username:e.authentication.isAuthenticated?e.authentication.username:"",enterprises:e.userData.enterprises.length>0?e.userData.enterprises:[],enterpriseId:e.userData.enterprises.length>0?e.userData.enterprises[e.userData.currentEnterprise].id:"",enterpriseName:e.userData.enterprises.length>0?e.userData.enterprises[e.userData.currentEnterprise].name:"",appVersionId:e.deployMarketApp.appVersionId,appPlanId:e.deployMarketApp.appPlanId,appPeriodId:e.deployMarketApp.appPeriodId,periods:e.deployMarketApp.periods,users:e.deployMarketApp.users,appVersion:e.deployMarketApp.appVersion,spaces:e.deployMarketApp.spaces,deployTitle:e.deployMarketApp.deployTitle,spaceId:e.deployMarketApp.spaceId,diskQuota:e.deployMarketApp.diskQuota,memoryQuota:e.deployMarketApp.memoryQuota,randomRoute:e.deployMarketApp.randomRoute,runtimeStart:e.deployMarketApp.runtimeStart,runtimeEnd:e.deployMarketApp.runtimeEnd}},function(e,t){return{dispatch:e,update:function(t){e((0,i.updateDeployMarketAppData)(t))},handleLoginClick:function(){e({type:l.CASLOGIN,forced:!0})},onSubmit:function(t){e((0,i.deployApplication)(t))},onReturn:function(){t.history.goBack()}}})(u)},s9FF:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=E(a("IidI")),n=E(a("PVZZ")),p=E(a("trpn")),o=E(a("aCj6")),l=E(a("0b0c")),i=E(a("G3dI")),s=E(a("vaID")),u=E(a("uuhB")),d=E(a("NJOH")),c=E(a("37+n")),f=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}();a("1uA9"),a("NZBz"),a("Op6J"),a("kJGR"),a("kxBb"),a("/Hhv"),a("nclB"),a("TZP0"),a("mKHw"),a("8QNH");var m=E(a("U7vG")),h=a("Pq8k"),y=a("sQS6");function E(e){return e&&e.__esModule?e:{default:e}}function k(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var b=c.default.Item,g=d.default.Option,M=(u.default.TextArea,s.default.confirm,function(e){function t(){var e,a,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,p=Array(n),o=0;o<n;o++)p[o]=arguments[o];return a=r=k(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(p))),r.onSubmitBeforeCheck=function(){r.props.form.validateFields(function(e){e||r.props.onSubmit({applicationId:r.props.appVersion.application.id,appVersionId:r.props.appVersion.id,appTypeId:r.props.appVersion.application.type.id,deployTitle:r.props.deployTitle,spaceId:r.props.spaceId,diskQuota:r.props.diskQuota,memoryQuota:r.props.memoryQuota,randomRoute:r.props.randomRoute,runtimeStart:r.props.runtimeStart,runtimeEnd:r.props.runtimeEnd})})},k(r,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,m.default.Component),f(t,[{key:"componentWillMount",value:function(){}},{key:"componentDidMount",value:function(){this.props.dispatch((0,y.initDeploy)({appVersionId:this.props.location.query.version||this.props.appVersionId,appPlanId:this.props.location.query.plan||this.props.appPlanId,periods:this.props.location.query.periods||this.props.periods,users:this.props.location.query.users||this.props.users}))}},{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator;return m.default.createElement(p.default,{spinning:this.props.loading,size:"large"},m.default.createElement(l.default,{type:"flex",justify:"center",style:{paddingTop:"32px"}},m.default.createElement(i.default,{sm:24,md:20,lg:16},m.default.createElement(o.default,null,m.default.createElement(l.default,null,m.default.createElement(i.default,{span:8},m.default.createElement("h3",null,this.props.intl.formatMessage({id:"deployMarketAppNameLabel"})),m.default.createElement("h4",null,this.props.appVersion.application&&this.props.appVersion.application.name)),m.default.createElement(i.default,{span:8},m.default.createElement("h3",null,this.props.intl.formatMessage({id:"deployMarketAppVersionLabel"})),m.default.createElement("h4",null,this.props.appVersion.application&&this.props.appVersion.version)),m.default.createElement(i.default,{span:8},m.default.createElement("h3",null,this.props.intl.formatMessage({id:"deployMarketAppAppTypeLabel"})),m.default.createElement("h4",null,this.props.appVersion.application&&this.props.appVersion.application.type.name))),m.default.createElement(l.default,{style:{paddingTop:"16px"}},this.props.periods&&m.default.createElement(i.default,{span:16},m.default.createElement("h3",null,"有效期"),m.default.createElement("h4",null,this.props.runtimeStart+" — "+this.props.runtimeEnd)),this.props.users&&m.default.createElement(i.default,{span:8},m.default.createElement("h3",null,"用户并发数"),m.default.createElement("h4",null,this.props.users,"位")))),m.default.createElement(l.default,null,m.default.createElement(i.default,{span:22,offset:1},m.default.createElement(b,{label:this.props.intl.formatMessage({id:"deployMarketAppTitleLabel"})},t("deployTitle",{rules:[{required:!0,message:"请输入部署标题！"}]})(m.default.createElement(u.default,{name:"deployTitle",placeholder:this.props.intl.formatMessage({id:"deployMarketAppAppTitlePlaceholder"}),onChange:function(t){e.props.update({name:t.target.name,value:t.target.value})}}))))),m.default.createElement(l.default,null,m.default.createElement(i.default,{span:10,offset:1},m.default.createElement(b,{label:"部署企业"},t("enterpriseId",{rules:[{required:!0,message:"请选择部署企业！"}]})(m.default.createElement(d.default,{name:"enterpriseId",placeholder:"请选择部署企业",style:{width:"100%"},onChange:function(t){e.props.form.resetFields(["spaceId"]),e.props.dispatch((0,y.getSpaces)(t))},onFocus:function(){e.props.isAuthenticated||e.props.handleLoginClick()}},this.props.enterprises&&this.props.enterprises.map(function(e){return m.default.createElement(g,{key:e.id,value:e.id},e.name)}))))),m.default.createElement(i.default,{span:10,offset:2},m.default.createElement(b,{label:"部署空间"},t("spaceId",{rules:[{required:!0,message:"请选择部署空间！"}]})(m.default.createElement(d.default,{placeholder:m.default.createElement("span",null,m.default.createElement(p.default,{spinning:this.props.updating,size:"small"}),this.props.intl.formatMessage({id:"deployMarketAppSpacePlaceholder"})),style:{width:"100%"}},this.props.spaces.map(function(e){return m.default.createElement(g,{key:e.id,value:e.id},e.name)})))))),m.default.createElement(l.default,null,m.default.createElement(i.default,{span:24},m.default.createElement(b,null,m.default.createElement(n.default,{name:"randomRoute",checked:this.props.randomRoute,onChange:function(t){e.props.update({name:t.target.name,value:t.target.checked})}},this.props.intl.formatMessage({id:"deployMarketAppRandomVisitLink"}))))),m.default.createElement(l.default,null,m.default.createElement(i.default,{span:24},m.default.createElement(r.default,{type:"primary",onClick:this.onSubmitBeforeCheck},this.props.intl.formatMessage({id:"deployMarketAppConfirmBuyLabel"})),m.default.createElement(r.default,{type:"primary",onClick:function(){return e.props.onReturn()}},this.props.intl.formatMessage({id:"deployMarketAppCancelLabel"})))))))}}]),t}());M=c.default.create()(M),t.default=(0,h.injectIntl)(M)}});